#ifndef __HILEVEL_H
#define __HILEVEL_H

// Include functionality relating to newlib (the standard C library).

#include <stdbool.h>
#include <stddef.h>
#include <stdint.h>

// Include functionality relating to the platform.

#include   "GIC.h"
#include "PL011.h"
#include "SP804.h"
#include "PL050.h"
#include "PL111.h"
#include   "SYS.h"

// Look up table
#include "lookupTable.h"

// Include functionality relating to the   kernel.

#include "lolevel.h"
#include "int.h"


typedef int pid_t;

typedef struct {
  uint32_t cpsr, pc, gpr[ 13 ], sp, lr;
} ctx_t;


enum request_t {
  okay, //0
  notokay, //1
  eat, //2
  finish, //3
};

typedef struct {
  pid_t pid;
  ctx_t ctx;
  int available;
  int priority;
  int age;
  uint32_t tos;
} pcb_t;

typedef struct {
  enum request_t data;
  int full;  //0 or 1
  pid_t sender;
  pid_t receiver;
} pipe_t;



uint16_t ascii[128][16] = {
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0000 (nul)
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0001
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0002
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0003
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0004
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0005
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0006
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0007
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0008
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0009
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+000A
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+000B
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+000C
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+000D
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+000E
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+000F
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0010
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0011
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0012
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0013
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0014
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0015
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0016
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0017
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0018
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0019
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+001A
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+001B
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+001C
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+001D
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+001E
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+001F
    { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},   // U+0020 (space)
    {0,0,448,448,448,448,448,448,448,448,0,0,448,448,0,0},                      // U+0021 (!)
    { 0,0,0,1584,1584,1584,1584,0,0,0,0,0,0,0,0,0},                             // U+0022 (")
    { 0,0,1088,1088,1600,1632,4088,544,544,816,4088,272,272,400,0,0},           // U+0023 (#)
    {0,128,448,1008,1680,144,176,224,960,1664,1152,1168,1712,992,128,0},        // U+0024 ($)
    { 0,0,12,1558,818,306,434,158,1216,6720,4960,4896,4880,7696,0,0},           // U+0025 (%)
    { 0,0,192,480,816,304,480,224,240,1432,1800,1800,1816,3568,0,0},            // U+0026 (&)
    { 0,192,192,192,192,192,0,0,0,0,0,0,0,0,0,0},                               // U+0027 (')
    { 0,128,192,64,96,96,32,32,32,32,96,64,64,192,128,0},                       // U+0028 (()
    {0,192,128,384,256,256,768,768,768,768,256,256,384,128,192,0},              // U+0029 ())
    {0,0,0,0,0,128,960,384,576,0,0,0,0,0,0,0},                                  // U+002A (*)
    {0,0,0,0,0,128,128,128,2032,128,128,128,0,0,0,0},                           // U+002B (+)
    {0,0,0,0,0,0,192,192,128,128,64,0,0,0,0,0},                                 // U+002C (,)
    { 0,0,0,0,0,0,496,496,0,0,0,0,0,0,0,0},                                     // U+002D (-)
    {0,0,0,0,0,0,0,0,0,0,192,192,0,0,0,0},                                      // U+002E (.)
    { 0,0,128,128,128,64,64,64,64,32,32,32,48,16,0,0},                          // U+002F (/)
    {0,0,1984,2080,2080,2080,2080,2080,2080,2080,2080,2080,1984,0,0,0},         // U+0030 (0)
    { 0,0,0,384,448,480,384,384,384,384,384,384,384,384,0,0},                   // U+0031 (1)
    {0,0,448,992,1584,1584,1536,1536,896,448,96,48,3120,4080,0,0},              // U+0032 (2)
    { 0,0,0,992,1584,1584,1536,896,896,1536,1536,1584,1584,992,0,0},            // U+0033 (3)
    { 0,0,0,768,896,960,832,800,816,792,4088,768,768,768,0,0},                  // U+0034 (4)
    { 0,0,0,2032,2032,48,48,1008,2032,1536,1536,1584,1008,480,0,0},             // U+0035 (5)
    { 0,0,896,1984,3168,96,96,2016,4064,3168,3168,3168,2016,1984,0,0},          // U+0036 (6)
    {0,0,2032,2032,1536,1792,768,896,384,448,192,192,224,96,0,0},               // U+0037 (7)
    {0,0,896,1984,3168,3168,3168,1984,2016,3168,3168,3168,3168,1984,0,0},       // U+0038 (8)
    {0,0,896,1984,3168,3168,3168,3168,4064,4032,3072,3104,4064,1984,0,0},       // U+0039 (9)
    { 0,0,0,384,384,0,0,0,0,0,384,384,0,0,0,0},                                 // U+003A (:)
    {  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},                         // U+003B (//)
    { 0,0,0,0,896,480,56,24,112,960,768,0,0,0,0,0},                             // U+003C (<)
    { 0,0,0,0,0,2032,2032,0,2032,2032,0,0,0,0,0,0},                             // U+003D (=)
    {0,0,0,0,0,48,480,1792,1536,896,224,16,0,0,0,0},                            // U+003E (>)
    { 0,0,224,496,792,520,768,384,192,64,64,0,64,64,0,0},                       // U+003F (?)
    {896,8176,12312,8204,4036,1570,1074,1042,1554,9746,14130,3814,12,12312,8176,0}, // U+0040 (@)
    { 0,0,384,896,704,1600,1632,1056,4064,4080,6160,6168,12312,0,0,0},          // U+0041 (A)
    { 0,0,480,2032,3120,2096,3120,2032,4080,2096,6192,6192,3120,2032,0,0},      // U+0042 (B)
    { 0,0,384,2016,3120,2072,8,8,8,8,6168,2072,3120,2016,0,0},                  // U+0043 (C)
    { 0,0,1008,2040,3096,2072,6168,6168,6168,6168,2072,3096,1560,1016,0,0},     // U+0044 (D)
    { 0,4064,4080,48,48,48,4080,4080,48,48,48,48,8176,8176,0,0},                // U+0045 (E)
    {0,0,4080,4080,48,48,48,2032,2032,48,48,48,48,48,0,0},                      // U+0046 (F)
    { 0,0,896,4064,6192,4120,24,8,7688,7688,4120,4112,7280,4032,0,0},           // U+0047 (G)
    {0,0,6168,6168,6168,6168,8184,8184,6168,6168,6168,6168,6168,0,0,0},         // U+0048 (H)
    {0,0,2016,384,384,384,384,384,384,384,384,384,384,2016,0,0},                // U+0049 (I)
    { 0,0,2016,384,384,384,384,384,384,384,384,396,472,248,0,0},                // U+004A (J)
    {0,0,0,1560,792,408,216,248,504,408,792,1560,1048,3096,0,0},                // U+004B (K)
    {0,0,48,48,48,48,48,48,48,48,48,2032,2032,0,0,0},                           // U+004C (L)
    {0,0,2056,6172,7196,7196,7228,7724,6700,7020,6476,6476,6604,6284,0,0},      // U+004D (M)
    {0,0,0,6168,6200,6264,6232,6360,6552,6424,6936,7704,7192,7192,0,0},         // U+004E (N)
    {0,0,896,4064,6192,6168,4104,12300,12300,12300,4120,6168,3120,2016,0,0},    // U+004F (O)
    { 0,0,1008,2040,3096,3096,3096,3096,2040,24,24,24,24,24,0,0},               // U+0050 (P)
    {0,0,896,4064,6192,6168,12312,12312,12312,12312,4120,6936,3632,8160,12288,0},// U+0051 (Q)
    { 0,0,2032,4088,3096,3096,3096,1560,1016,792,1560,3096,3096,6168,0,0},       // U+0052 (R)
    { 0,0,480,1008,1560,1048,24,496,1984,1536,3080,3096,1592,1008,0,0},          // U+0053 (S)
    {0,0,4092,4092,192,192,192,192,192,192,192,192,192,192,0,0},                 // U+0054 (T)
    {0,0,0,3096,3096,3096,3096,3096,3096,3096,3096,3096,1584,992,0,0},           // U+0055 (U)
    { 0,0,0,6156,3080,1048,1552,1552,560,800,288,352,448,192,0,0},               // U+0056 (V)
    { 0,0,256,17286,17284,17028,26316,9932,9288,9288,15480,6200,6192,6192,0,0},  // U+0057 (W)
    { 0,0,2056,1048,1584,800,480,192,448,480,800,1584,1048,3084,0,0},            // U+0058 (X)
    {0,0,3084,1032,1560,560,800,480,192,192,192,192,192,192,0,0},                // U+0059 (Y)
    { 0,0,4080,4080,3072,1536,768,384,128,192,96,48,4088,4088,0,0},              // U+005A (Z)
    { 0,224,32,32,32,32,32,32,32,32,32,32,32,32,224,0},                          // U+005B ([)
    { 0,0,32,32,64,64,64,192,128,128,128,384,256,256,0,0},                       // U+005C (\)
    { 0,448,256,256,256,256,256,256,256,256,256,256,256,256,448,0},              // U+005D (])
    { 0,0,64,192,224,416,304,784,536,0,0,0,0,0,0,0},                             // U+005E (^)
    { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,2044,0},                                       // U+005F (_)
    { 0,0,32,96,64,0,0,0,0,0,0,0,0,0,0,0},                                       // U+0060 (`)
    { 0,0,384,896,704,1600,1632,1056,4064,4080,6160,6168,12312,0,0,0},           // U+0061 (a)
    { 0,0,480,2032,3120,2096,3120,2032,4080,2096,6192,6192,3120,2032,0,0},       // U+0062 (b)
    { 0,0,384,2016,3120,2072,8,8,8,8,6168,2072,3120,2016,0,0},                   // U+0063 (c)
    { 0,0,1008,2040,3096,2072,6168,6168,6168,6168,2072,3096,1560,1016,0,0},      // U+0064 (d)
    { 0,4064,4080,48,48,48,4080,4080,48,48,48,48,8176,8176,0,0},                 // U+0065 (e)
    {0,0,4080,4080,48,48,48,2032,2032,48,48,48,48,48,0,0},                       // U+0066 (f)
    { 0,0,896,4064,6192,4120,24,8,7688,7688,4120,4112,7280,4032,0,0},            // U+0067 (g)
    {0,0,6168,6168,6168,6168,8184,8184,6168,6168,6168,6168,6168,0,0,0},          // U+0068 (h)
    {0,0,2016,384,384,384,384,384,384,384,384,384,384,2016,0,0},                 // U+0069 (i)
    { 0,0,2016,384,384,384,384,384,384,384,384,396,472,248,0,0},                 // U+0070 (j)
    {0,0,0,1560,792,408,216,248,504,408,792,1560,1048,3096,0,0},                 // U+0071 (k)
    {0,0,48,48,48,48,48,48,48,48,48,2032,2032,0,0,0},                            // U+0072 (l)
    {0,0,2056,6172,7196,7196,7228,7724,6700,7020,6476,6476,6604,6284,0,0},       // U+0073 (m)
    {0,0,0,6168,6200,6264,6232,6360,6552,6424,6936,7704,7192,7192,0,0},          // U+0074 (n)
    {0,0,896,4064,6192,6168,4104,12300,12300,12300,4120,6168,3120,2016,0,0},     // U+0075 (o)
    {0,0,1008,2040,3096,3096,3096,3096,2040,24,24,24,24,24,0,0},                 // U+0076 (p)
    {0,0,896,4064,6192,6168,12312,12312,12312,12312,4120,6936,3632,8160,12288,0},// U+0077 (q)
    {0,0,2032,4088,3096,3096,3096,1560,1016,792,1560,3096,3096,6168,0,0},        // U+0078 (r)
    { 0,0,480,1008,1560,1048,24,496,1984,1536,3080,3096,1592,1008,0,0},          // U+0079 (s)
    {0,0,4092,4092,192,192,192,192,192,192,192,192,192,192,0,0},                 // U+0080 (t)
    {0,0,0,3096,3096,3096,3096,3096,3096,3096,3096,3096,1584,992,0,0},           // U+0081 (u)
    {0,0,0,6156,3080,1048,1552,1552,560,800,288,352,448,192,0,0},                // U+0082 (v)
    {0,0,256,17286,17284,17028,26316,9932,9288,9288,15480,6200,6192,6192,0,0},   // U+0083 (w)
    {0,0,2056,1048,1584,800,480,192,448,480,800,1584,1048,3084,0,0},             // U+0084 (x)
    {0,0,3084,1032,1560,560,800,480,192,192,192,192,192,192,0,0},                // U+0085 (y)
    {0,0,4080,4080,3072,1536,768,384,128,192,96,48,4088,4088,0,0},               // U+0086 (z)
    {0,448,64,64,64,64,64,48,96,64,64,64,64,64,448,0},                           // U+007B ({)
    {0,384,384,384,384,384,384,384,384,384,384,384,384,384,384,0},               // U+007C (|)
    {0,192,128,128,128,128,384,768,256,128,128,128,128,128,224,0},               // U+007D (})
    {0,0,0,0,0,2160,4092,1806,2,0,0,0,0,0,0,0},                                  // U+007E (~)
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}                                            // U+007F
};

uint16_t cursor[16] = { 1798,2249,4401,4161,9218,10500,8716,24580,36868,32776,17424,9184,4352,2304,1536,0 };

uint16_t cursor_click[16] = { 49193,50966,2505,53297,4161,9218,10501,8716,24580,36868,33800,16400,9184,4352,2304,1536 };


#endif
